[workspace]
channels = ["conda-forge"]
name = "lfortran"
platforms = ["linux-64","win-64"]
version = "0.60.0"
description = "Modern interactive LLVM-based Fortran compiler"

[tasks]

[dependencies]

[feature.envx]
platforms = ["linux-64"]
channels = ["conda-forge"]

[feature.envx.target.linux-64.activation]
scripts = ["setvars.sh"]

[feature.envx.target.linux-64.dependencies]
toml = "0.10.2.*"
pytest = "8.1.1.*"
jupyter = "1.0.0.*"
xeus = "5.1.0.*"
xeus-zmq = "3.0.0.*"
nlohmann_json = "3.11.3.*"
jupyter_kernel_test = "0.7.0.*"
re2c = "3.1.*"
bison = "3.4.*"
rapidjson = "1.1.0.*"
ninja = "1.11.1.*"
pandoc = "3.1.13.*"
kokkos = "4.4.1.*"
cmake = "==4.2.3"
zlib = "1.3.1.*"
shell = "0.2.0.*"
python = "3.13.*"
numpy = ">=2.4.2,<3"
gcc = "15.2.*"
gxx = "15.2.*"
libunwind = "1.7.2.*"
zstd-static = "1.5.7.*"
llvmdev = "==21.1.8"

[feature.envx.target.linux-64.tasks]
clean = { cmd = "bash clean.sh", cwd = "../../" }
ci = { cmd = "bash ./ci/build.sh", depends-on = ["clean"], cwd = "../../" }

[feature.envw]
platforms = ["win-64"]
channels = ["conda-forge"]

[feature.envw.target.win-64.activation]
scripts = ["setvars.bat"]

[feature.envw.target.win-64.dependencies]
toml = "*"
pytest = "*"
jupyter = "*"
xeus = "5.1.0.*"
xeus-zmq = "3.0.0.*"
nlohmann_json = "3.11.3.*"
jupyter_kernel_test = "*"
re2c = "*"
ninja = "*"
m2-bison = "3.0.4.*"
git = "*"
cmake = "4.2.3.*"
zlib = "*"
python = "3.13.*"
xonsh = ">=0.22.4,<0.23"
numpy = ">=2.4.2,<3"
clang = "==21.1.8"
llvmdev = "==21.1.8"

[feature.envw.target.win-64.tasks]
clean = { cmd = "xonsh clean.sh", cwd = "../../" }
ci = { cmd = "xonsh ./ci/build.sh", depends-on = ["clean"], cwd = "../../" }

[environments]
envx = { features = ["envx"] }
envw = { features = ["envw"] }


